{% extends '::base.html.twig' %}

{% block stylesheets %}
    <link href="{{ asset("bundles/innovaself/css/editor.css") }}" rel="stylesheet" />
{% endblock %}

{% block body -%}
    <!-- #420 : ajout d'un bouton "Revenir à la liste des tâches"
    et ainsi faire comme pour les tests -->
    <a class="btn btn-default" href="{{ path('editor_questionnaires_show') }}">
        <span class="glyphicon glyphicon-chevron-left"></span>{{ 'editor.task.back_to_list' | trans }}
    </a>
    <hr/>
    <ul class="nav nav-tabs" role="tablist">
        {% if test is defined %}
        <li>
            <a href="{{ path('editor_test_questionnaires_show', { 'testId': test.id }) }}">
                <span class="glyphicon glyphicon-chevron-left"></span> {{ 'editor.task.back_to_list' | trans }}
            </a>
        </li>
        {% endif %}
        <li class="active">
            <a href="#task" role="tab" data-toggle="tab">
                <span class="glyphicon glyphicon-file"></span> Tâches
            </a>
        </li>
        <li>
            <a href="#comments" role="tab" data-toggle="tab">
                <span class="glyphicon glyphicon-comment"></span> Commentaires
            </a>
        </li>
        <li>
            <a href="#identity" role="tab" data-toggle="tab">
                <span class="glyphicon glyphicon-list-alt"></span> Fiche d'identité
            </a>
        </li>
        <li>
            <a href="#history" role="tab" data-toggle="tab">
                <span class="glyphicon glyphicon-time"></span> Historique
            </a>
        </li>
        <li class='pull-right'>
            <img id="loader-img" style="display:none;" src="{{ asset('bundles/innovaself/images/loader.gif') }}"/>
        </li>
    </ul>

    <br/>

    <div class="tab-content">
        <div class="tab-pane active" id="task">
            {% include "InnovaSelfBundle:Editor/partials:questionnaire.html.twig" %}
        </div>
        <div class="tab-pane" id="comments">
            {% include "InnovaSelfBundle:Editor/partials:comments.html.twig" %}
        </div>
        <div class="tab-pane" id="identity">
            {% include "InnovaSelfBundle:Editor/partials:identity.html.twig" %}
        </div>
        <div class="tab-pane" id="history">
            {% include "InnovaSelfBundle:Editor/partials:history.html.twig" %}
        </div>
    </div>

    {% include "InnovaSelfBundle:Editor/common:modal.html.twig" %}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset("bundles/innovaself/js/editor.js") }}"></script>
    <script type="text/javascript" src="{{ asset("bundles/innovaself/js/jquery.Jcrop.min.js") }}"></script>
    <script type="text/javascript" src="{{ asset("bundles/innovaself/js/editor_crop.js") }}"></script>
    {{ tinymce_init() }}
{% endblock %}

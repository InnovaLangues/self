{% extends '::base.html.twig' %}

{% block body -%}
    <h3>
        {{ 'menu.stats' | trans }} - Sessions
        <a href="#myChart" class="btn btn-default"><span class="glyphicon glyphicon-signal"></span></a>
    </h3>

    <div class="input-group">
        <span class="input-group-addon">{{ 'generic.filter' | trans }} </span>
        <input type="text" id="search" class="form-control" value="">
    </div>
    <br/>

    <table id="data-table" class="table table-striped" data-chart-type="pie" data-labels="language" data-numbers="usercount" data-aggregate=1>
        <thead>
            <tr>
                <th>{{ 'editor.session.name' | trans }}</th>
                <th>{{ 'editor.test.name' | trans }}</th>
                <th>{{ 'editor.test.language' | trans }}</th>
                <th>{{ 'stats.usercount' | trans }}</th>
            </tr>
        </thead>
        <tbody>
    		{% for data_session in data_sessions %}
    			<tr class="chart-data" data-language="{{ data_session.language |trans }}" data-usercount="{{ data_session.usercount }}">
    				<td>
    					{{ data_session.name }}
    				</td>
                    <td>
                         <span class="text-muted">{{ data_session.test }}</span>
                    </td>
                    <td>
                         <span class="text-muted">{{ data_session.language |trans }}</span>
                    </td>
    				<td>
                        {{ data_session.usercount }}
    				</td>
    			</tr>
    		{% endfor %}
        </tbody>
    </table>

    <hr/>
    <canvas max-height="300px" width="100%" id="myChart"></canvas>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    {% javascripts filter='yui_js' output='js/compiled/stats.js'
        '@InnovaSelfBundle/Resources/public/js/lib/Chart.bundle.js'
        '@InnovaSelfBundle/Resources/public/js/lib/jquery.quicksearch.js'
        '@InnovaSelfBundle/Resources/public/js/stats.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

{% endblock %}

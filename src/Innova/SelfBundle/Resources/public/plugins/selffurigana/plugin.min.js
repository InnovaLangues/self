tinymce.PluginManager.add("selffurigana", 
	function (t) {
	    t.addButton('selffurigana', {
	    	text: 'Furigana',
	        icon: false,
			onclick : function(v) {
				var editor  = tinyMCE.activeEditor;
				if (editor.selection.getContent()) {
				    selection = editor.selection.getContent();
				    replacement = selection.replace(/(.*?)[（(](.*?)[）)]/, "<ruby><rb>$1</rb><rt>$2</rt><ruby>");
				    if(replacement != selection){
				    	t.execCommand('mceInsertContent', false, replacement);
				    	return;
				    }
				}
				alert("Merci de sélectionner du texte ayant ce format : xxxxx(yy)");
			}
		});
	}
);